<!DOCTYPE html>
<html>
  {% load static %} {% load custom_filters %}
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %} HomePage {% endblock %}</title>

    <script src="{% static 'workshop_app/js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/popper.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/toastr.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />

    {% block extra-dependencies %} {% endblock %}

    <link
      rel="stylesheet"
      href="{% static 'workshop_app/css/bootstrap.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'workshop_app/css/toastr.min.css' %}"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{% static 'workshop_app/css/base.css' %}"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="{% static 'workshop_app/css/font-awesome.css' %}"
      type="text/css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css"
    />

    {% block extra-custom-scripts %} {% endblock %}
    <style>
      :root {
        --primary-color: #1173d4;
      }
      body {
        font-family: "Inter", sans-serif !important;
      }
      .navbar-brand {
        color: #343a40 !important;
      }
      .nav-link {
        color: #495057 !important;
        font-weight: 500 !important;
      }
      .nav-link:hover {
        color: var(--primary-color) !important;
      }
      .profile-pic {
        width: 40px !important;
        height: 40px !important;
        background-size: cover !important;
        background-position: center !important;
        background-repeat: no-repeat !important;
      }
      .dropdown-item.text-danger:hover {
        color: #fff !important;
        background-color: #dc3545 !important;
      }
    </style>
  </head>

  <body>

    {% block header %}
    <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
      <div class="container-fluid px-4">
        {% if user.is_authenticated %}
        <a
          class="navbar-brand d-flex align-items-center h5 mb-0 fw-bold"
          href="{% url 'workshop_app:index' %}"
          >FOSSEE Workshops</a
        >
        {% else %}
        <a
          class="navbar-brand d-flex align-items-center h5 mb-0 fw-bold"
          href="{{request.scheme}}://{{request.get_host}}"
          >FOSSEE Workshops</a
        >
        {% endif %}
        <button
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
          class="navbar-toggler"
          data-bs-target="#navbarSupportedContent"
          data-bs-toggle="collapse"
          type="button"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="d-flex collapse navbar-collapse justify-content-between"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'statistics_app:public' %}"
                >Workshop Statistics</a
              >
              {% if user.is_authenticated %}
            </li>
            {% if request.user|has_group:"instructor" %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'statistics_app:team' %}"
                >Team Statistics</a
              >
            </li>
            {% endif %}
            <li class="nav-item">
              <a
                class="nav-link"
                href="{% url 'workshop_app:workshop_status_instructor' %}"
                >Workshop Status</a
              >
            </li>
            {% if not request.user|has_group:"instructor" %}
            <li class="nav-item">
              <a
                class="nav-link"
                href="{% url 'workshop_app:propose_workshop' %}"
                >Propose Workshop</a
              >
            </li>
            {% endif %}
            <li class="nav-item">
              <a
                class="nav-link"
                href="{% url 'workshop_app:workshop_type_list' %}"
                >Workshop Types</a
              >
            </li>
            {% endif %}
          </ul>
          {% if user.is_authenticated %}
          <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <div class="nav-item dropdown">
                <a
                  aria-expanded="false"
                  class="nav-link dropdown-toggle d-flex align-items-center"
                  data-toggle="dropdown"
                  href="#"
                  id="navbarDropdown"
                  role="button"
                >
                  <div
                    class="profile-pic rounded-circle me-2 d-flex justify-content-center align-items-center"
                  >
                    <span class="material-icons" style="vertical-align: middle"
                      >account_circle</span
                    >
                  </div>
                  <span class="d-none d-lg-inline fw-semibold text-dark"
                    >{{user.get_full_name|title}}</span
                  >
                </a>
                <ul
                  aria-labelledby="navbarDropdown"
                  class="dropdown-menu dropdown-menu-right"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      href="{% url 'workshop_app:view_own_profile' %}"
                      >View Profile</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="{% url 'password_change' %}"
                      >Change Password</a
                    >
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a
                      class="dropdown-item text-danger"
                      href="{% url 'workshop_app:logout' %}"
                      >Logout</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </nav>
    {% endblock %}

    <div class="base-content">
      {% block content %}
      <h1>Base Template Content. Please override me</h1>
      {% endblock %}
    </div>

    <script>
      {% if messages %}
          {% for message in messages %}
              toastr[{% if message.tags %} "{{ message.tags }}" {% else %} "info" {% endif %}]("{{ message }}");
          {% endfor %}
      {% endif %}
    </script>
  </body>
  <footer class="footer">
    {% block footer %}
    <div class="container">Developed by FOSSEE group, IIT Bombay</div>
    {% endblock %}
  </footer>
</html>
